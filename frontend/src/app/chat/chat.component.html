<div class="chat-component-container">
  <main class="chat-main">
      <div class="chat-sidebar">
        <div class="groups-sidebar">
          <h3><i class="fas fa-comments"></i> Groups</h3>
          <div class="rooms" *ngFor="let group_ of groups">
            <button (click)="changeGroup(group_.id, group_.name)" id="group-name" [ngClass]="{active: group_.id === group.id}">
              {{group_.name}}
            </button>
          </div>
          <button routerLink="create" id="group-create">
            <svg fill="white" id="Layer_1" height="15" viewBox="0 0 24 24" width="15" xmlns="http://www.w3.org/2000/svg" data-name="Layer 1"><path d="m12 0a12 12 0 1 0 12 12 12.013 12.013 0 0 0 -12-12zm0 22a10 10 0 1 1 10-10 10.011 10.011 0 0 1 -10 10zm1-11h4v2h-4v4h-2v-4h-4v-2h4v-4h2z"/></svg>Create a new group
          </button>
        </div>
        <div class="rooms-sidebar" *ngIf="rooms.length > 0">
          <h3>Role: <span [ngClass]="{admin: userGroupRole === 'admin'}">{{userGroupRole}}</span></h3>
          <button routerLink="/group/{{group.id}}" *ngIf="userGroupRole === 'admin'" id="group-create">Manage group</button>
          <h3><i class="fas fa-comments"></i> Rooms</h3>
          <div class="rooms" *ngFor="let room_name of rooms">
            <button (click)="changeRoom(room_name)" id="room-name" [ngClass]="{active: room == room_name}">
              #{{room_name}}
            </button>
          </div>
          <h3><i class="fas fa-users"></i>Active users</h3>
          <ul id="users" *ngIf="room !== ''">
            <li *ngFor="let user of connectedUsers"><span [ngClass]="{admin: user.role == 'admin'}">{{user.username}}</span></li>
          </ul>
          <h3><i class="fas fa-users"></i>All group users</h3>
            <p *ngFor="let user of groupUsers"><span [ngClass]="{admin: user.groupRole == 'admin' || user.role == 'admin'}">{{user.username}}</span></p>
        </div>
      </div>
      <div class="messages-container">
        <div class="chat-messages">
          <div *ngFor="let message of sortedMessages">
            <div class="message" *ngIf="message.username !== 'bot'">
              <p class="meta">{{message.username}}<span *ngIf="message.date">{{message.date | date :'short'}}</span></p>
              <p class="text">{{message.text}}</p>
            </div>
            <div class="info-message" *ngIf="message.username === 'bot'">
              <p class="text">{{message.text}}</p>
            </div>
          </div>
        </div>
      </div>
    </main>
    <div class="chat-form-container" *ngIf="room !== ''">
      <input
        id="msg"
        [formControl]="msg"
        type="text"
        placeholder="Enter Message"
        required
        autocomplete="off"
        name="message"
      />
      <button (click)="sendMessage()" class="btn"><i class="fas fa-paper-plane"></i> Send</button>
  </div>
</div>
